<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Moving to Pelican</title>
        <link rel="stylesheet" href="http://blog.roseman.org.uk/theme/css/main.css" />
        <link href="http://blog.roseman.org.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="rosemanblog Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://blog.roseman.org.uk/">rosemanblog </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://blog.roseman.org.uk/category/technical.html">Technical</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://blog.roseman.org.uk/2012/02/20/moving-to-pelican/" rel="bookmark"
           title="Permalink to Moving to Pelican">Moving to Pelican</a></h1>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="danielroseman">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-02-20T12:45:00">
                Mon 20 February 2012
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="http://blog.roseman.org.uk/author/daniel-roseman.html">Daniel Roseman</a>
        </address>
<p>In <a href="http://blog.roseman.org.uk/category/technical.html">Technical</a>. </p>
<p>tags: <a href="http://blog.roseman.org.uk/tag/meta.html">meta</a><a href="http://blog.roseman.org.uk/tag/blog.html">blog</a><a href="http://blog.roseman.org.uk/tag/pelican.html">pelican</a><a href="http://blog.roseman.org.uk/tag/python.html">python</a></p>
</footer><!-- /.post-info -->      <p>I'm starting to blog again more regularly, but of course half the fun of having your own blog is mucking about with the technology that powers it. Encouraged by others who've recently made the switch, I've moved this blog over to the static page generation system <a href="https://github.com/ametaireau/pelican/">Pelican</a>.</p>
<p>I liked Mingus, but it really was overkill for what I need: regenerating a bunch of basically static pages for every request didn't make much sense, even if there weren't that many requests in the first place. I wasn't using any of the apps that came along with the basic blogging stuff: oembed, quotes, that sort of thing. And it seemed to me that if I was just typing in markdown and saving it, I might as well use a system that can take that markdown directly and just create a blog from it.</p>
<p>Well, that's exactly what Pelican does. No database involved, just a bunch of markdown files on disk and a script to convert them into formatted HTML pages via some Jinja2 templates. I write an entry in vim, save it into a specific directory, then run the pelican script which outputs the formatted pages. I've set up dropbox to sync that folder to my server, and that's all that needs to happen to publish a new blog entry.</p>
<p>As usual, I've customised things a bit. I didn't want to change the old URLs at all, so I've used the <code>ARTICLE_PERMALINK_STRUCTURE</code> setting to output files into directories by year/month/day (in hindsight, that was another bit of overkill from Mingus - one directory per month would probably have been enough). I've also set Apache to rewrite requests from <code>slug.html</code> to <code>slug/</code>, again so that the old URLs continue to work. Pelican has a <code>CLEAN_URLS</code> setting which means that files are created as <code>slug/index.html</code>, with the idea that you set Apache to serve the index.html automatically and other pages link to just <code>slug/</code>, but I didn't like the idea of yet <em>another</em> layer of subdirectories. So I've hacked it to split the setting into two: <code>CREATE_CLEAN_URLS</code> to control how the files are created, and <code>LINK_CLEAN_URLS</code> to determine how other pages link to them. Works nicely.</p>
    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "2012/02/20/moving-to-pelican/";
        var disqus_url = "http://blog.roseman.org.uk/2012/02/20/moving-to-pelican/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://rosemanblog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://blog.roseman.org.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="http://twitter.com/danielroseman">twitter</a></li>
                            <li><a href="http://github.com/danielroseman">github</a></li>
                            <li><a href="http://stackoverflow.com/users/104349/daniel-roseman">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'rosemanblog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>